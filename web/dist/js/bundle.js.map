{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/bundle.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\nlet server = ''\nlet data: any = undefined\n\nlet ipNameMap: any = {\n  '192.168.31.218': '小米笔记本',\n  '192.168.31.251': '公司MBP',\n  '192.168.31.162': '小米手机',\n  '\t192.168.31.241': 'ipad2018',\n  '192.168.31.254': '华为P30'\n}\n\nfunction parseQuery(queryString: string) {\n  var query: any = {}\n  var pairs = (queryString[0] === '?' ? queryString.substring(1) : queryString).split('&')\n  for (var i = 0; i < pairs.length; i++) {\n    var pair = pairs[i].split('=')\n    query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '')\n  }\n  return query\n}\n\nfunction fetchGet(path: string, cache: RequestCache, callback: (data: any) => void) {\n  fetch(`${server}${path}`, { cache: cache })\n    .then(response => response.json())\n    .then(function (resp) {\n      if (resp.code != 200) {\n        console.log('fetchGet,not 200', resp)\n        return\n      }\n\n      callback(resp.data)\n    })\n    .catch(function (error) {\n      console.log('fetchGet Failed', error)\n    })\n}\n\n\nfunction fetchPost(path: string, body: any, cache: RequestCache, callback: (data: any)=>void) {\n  fetch(`${server}${path}`, {\n    method: 'POST', // *GET, POST, PUT, DELETE, etc.\n    mode: 'cors', // no-cors, *cors, same-origin\n    cache: cache, // *default, no-cache, reload, force-cache, only-if-cached\n    credentials: 'same-origin', // include, *same-origin, omit\n    headers: {\n      'Content-Type': 'application/json'\n      // 'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    redirect: 'follow', // manual, *follow, error\n    referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n    body: JSON.stringify(body) // body data type must match \"Content-Type\" header\n  })\n    .then(response => response.json())\n    .then(function (resp) {\n      if (resp.code != 200) {\n        console.log('transWords fetch,not 200', resp)\n        return\n      }\n\n      callback(resp.data)\n    })\n    .catch(function (error) {\n      console.log('fetchPost Failed', error)\n    })\n}\n\n\nfunction renderFilterIpSelect(ips: string[]) {\n  let html = '<option value=\"\">all</option>'\n  for (let ip of ips) {\n    let name = ip\n    if (ipNameMap[ip]) {\n      name = ipNameMap[ip]\n    }\n    html += `<option value=\"${ip}\">${name}</option>`\n  }\n\n  //@ts-ignore\n  document.getElementById('filterIp').innerHTML = html\n}\n\nfunction renderQuerylogTable(data: any, unique: boolean, freshIp: boolean) {\n  let ipMap: any = {}\n  let html = ''\n  let domainMap: any = {}\n  for (let item of data) {\n    if (unique && domainMap[item[3]]) {\n      continue\n    }\n    domainMap[item[3]] = 1\n    ipMap[item[2]] = 1\n    let date = new Date(parseInt(item[0])*1000)\n    let at = item[1]\n    switch (at) {\n      case '0':\n        at = '忽略'\n        break\n      case '1':\n        at = '正常'\n        break\n      case '2':\n        at = '拦截'\n        break\n      default:\n        break\n    }\n    let ip = item[2]\n    if (ipNameMap[ip]) {\n      ip += `(${ipNameMap[ip]})`\n    }\n    html += `<tr>\n    <td>${date.toLocaleString()}</td>\n    <td>${at}</td>\n    <td>${ip}</td>\n    <td>${item[3]}</td>\n    <td>${item[4]?item[4]:''}</td>\n    <td>\n      <select name=\"opt\" class=\"form-select\" domain=\"${item[3]}\">\n        <option value=\"\">不动</option>\n        <option value=\"0\">忽略</option>\n        <option value=\"1\">正常</option>\n        <option value=\"2\">拦截</option>\n      </select>\n    </td>\n    </tr>`\n  }\n\n  //@ts-ignore\n  document.getElementById('querylog').innerHTML = html\n  document.querySelectorAll(\"select[name='opt']\").forEach((select) => {\n    console.log('select', select)\n    select.addEventListener('change', optChange)\n  })\n  if (freshIp) {\n    renderFilterIpSelect(Object.keys(ipMap))\n  }\n}\n\nfunction filterIpChange() {\n  //@ts-ignore\n  let ip = document.getElementById('filterIp').value\n  if (ip == \"\") {\n    renderQuerylogTable(data, true, false)\n    return\n  }\n\n  let items: any = []\n  for (let item of data) {\n    if (ip != item[2]) {\n      continue\n    }\n    items.push(item)\n  }\n  renderQuerylogTable(items, false, false)\n}\n\nfunction accessTypeChange() {\n  //@ts-ignore\n  let at = document.getElementById('accessType').value\n  if (at == \"\") {\n    renderQuerylogTable(data, true, false)\n    return\n  }\n\n  let items: any = []\n  for (let item of data) {\n    if (at != item[1]) {\n      continue\n    }\n    items.push(item)\n  }\n  renderQuerylogTable(items, false, false)\n}\n\nfunction optChange(event: any) {\n  let opt = event.target.value\n  if (opt == \"\") {\n    return\n  }\n\n  let at: number = parseInt(opt)\n  //@ts-ignore\n  let ip: string = document.getElementById('filterIp').value\n  if (at == 2) {\n    //忽略就全部忽略\n    ip = \"\"\n  }\n  let domain = event.target.getAttribute('domain')\n  fetchPost('/api/access-control/update', {accessType: at, ip: ip, domain: domain}, 'no-cache', (rspData) => {\n    console.log(rspData)\n  })\n}\n\nfunction initDatesSelect() {\n  let ts = Date.now() - 3600*8*1000\n  let html = ''\n  for (let i=0;i<10;i++) {\n    let date = new Date(ts)\n    let str = `${date.getFullYear()}${(date.getMonth()+1).toString().padStart(2, '0')}${(date.getDate()).toString().padStart(2, '0')}`\n    html += `<option value=\"${str}\">${str}</option>`\n    ts -= 3600*24*1000\n  }\n  //@ts-ignore\n  document.getElementById('date').innerHTML = html\n}\n\nfunction queryLog() {\n  //@ts-ignore\n  let date = document.getElementById('date').value\n  if (date == \"\") {\n    return\n  }\n\n  //@ts-ignore\n  document.getElementById('querylog').innerHTML = ''\n  fetchPost('/api/querylog/get', {date: date, ip: \"\", bufSize: 1024*1024}, 'no-cache', (rspData) => {\n    data = rspData\n    renderQuerylogTable(rspData, true, true)\n  })\n}\n\nfunction initIndex(query: any) {\n  initDatesSelect()\n  queryLog()\n\n  //@ts-ignore\n  document.getElementById('date').addEventListener('change', queryLog)\n  //@ts-ignore\n  document.getElementById('filterIp').addEventListener('change', filterIpChange)\n  //@ts-ignore\n  document.getElementById('accessType').addEventListener('change', accessTypeChange)\n}\n\nfunction renderDenyTable(data: any) {\n  let html = ''\n  for (let item of data) {\n    let ip = item[0]\n    if (ipNameMap[ip]) {\n      ip += `(${ipNameMap[ip]})`\n    }\n    html += `<tr>\n    <td>${ip}</td>\n    <td>${item[1]}</td>\n    </tr>`\n  }\n\n  //@ts-ignore\n  document.getElementById('denyTable').innerHTML = html\n}\n\n\nfunction renderControlTable(data: any) {\n  data.sort((a:any,b:any)=> b[2] - a[2])\n  let html = ''\n  for (let item of data) {\n    let control = item[2]\n    switch (control) {\n      case '0':\n        control = '忽略'\n        break\n      case '1':\n        control = '正常'\n        break\n      case '2':\n        control = '拦截'\n        break\n      default:\n        break\n    }\n    let ip = item[0]\n    if (ipNameMap[ip]) {\n      ip += `(${ipNameMap[ip]})`\n    }\n    html += `<tr>\n    <td>${ip}</td>\n    <td>${item[1]}</td>\n    <td>${control}</td>\n    </tr>`\n  }\n\n  //@ts-ignore\n  document.getElementById('controlTable').innerHTML = html\n}\n\nfunction denySubmit(event: any) {\n  //@ts-ignore\n  let ip: string = document.getElementById('ip').value.trim()\n  //@ts-ignore\n  let at: number = parseInt(document.getElementById('deny').value)\n  let deny = at == 1? true: false\n  \n  fetchPost('/api/access-deny/update', {deny: deny, ip: ip}, 'no-cache', (rspData) => {\n    console.log(rspData)\n  })\n}\n\nfunction controlSubmit(event: any) {\n  //@ts-ignore\n  let ip: string = document.getElementById('ip').value.trim()\n  //@ts-ignore\n  let domain: string = document.getElementById('domain').value.trim()\n  //@ts-ignore\n  let at: number = parseInt(document.getElementById('at').value)\n  if (at == 2) {\n    //忽略就全部忽略\n    ip = \"\"\n  }\n  \n  fetchPost('/api/access-control/update', {accessType: at, ip: ip, domain: domain}, 'no-cache', (rspData) => {\n    console.log(rspData)\n  })\n}\n\nfunction initControl(query: any) {\n  //@ts-ignore\n  document.getElementById('denyTable').innerHTML = ''\n  fetchPost('/api/access-deny/get', {}, 'no-cache', (rspData) => {\n    renderDenyTable(rspData)\n  })\n\n  //@ts-ignore\n  document.getElementById('controlTable').innerHTML = ''\n  fetchPost('/api/access-control/get', {}, 'no-cache', (rspData) => {\n    renderControlTable(rspData)\n  })\n\n  //@ts-ignore\n  document.getElementById('denySubmit').addEventListener('click', denySubmit)\n  \n  //@ts-ignore\n  document.getElementById('controlSubmit').addEventListener('click', controlSubmit)\n}\n\nexport function init() {\n  if (window.location.href.startsWith('file:')) {\n    server = 'http://127.0.0.1:8123'\n  }\n\n  let pathname = window.location.pathname\n  let arr = pathname.split('/')\n  pathname = arr[arr.length-1]\n  let query = parseQuery(window.location.search)\n  switch (pathname) {\n    case '':\n    case 'index.html':\n      initIndex(query)\n      break\n    case 'control.html':\n      initControl(query)\n      break\n    default:\n      console.log('wrong pathname', pathname, window.location.pathname)\n      break\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  init()\n})"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYnVuZGxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7OztBQ0NBLElBQUksU0FBUyxFQUFiO0FBQ0EsSUFBSSxPQUFZLFNBQWhCO0FBRUEsSUFBSSxZQUFpQjtBQUNuQixzQkFBa0IsT0FEQztBQUVuQixzQkFBa0IsT0FGQztBQUduQixzQkFBa0IsTUFIQztBQUluQix1QkFBbUIsVUFKQTtBQUtuQixzQkFBa0I7QUFMQyxDQUFyQjtBQVFBLFNBQVMsVUFBVCxDQUFvQixXQUFwQixFQUF1QztBQUNyQyxRQUFJLFFBQWEsRUFBakI7QUFDQSxRQUFJLFFBQVEsQ0FBQyxZQUFZLENBQVosTUFBbUIsR0FBbkIsR0FBeUIsWUFBWSxTQUFaLENBQXNCLENBQXRCLENBQXpCLEdBQW9ELFdBQXJELEVBQWtFLEtBQWxFLENBQXdFLEdBQXhFLENBQVo7QUFDQSxTQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksTUFBTSxNQUExQixFQUFrQyxHQUFsQyxFQUF1QztBQUNyQyxZQUFJLE9BQU8sTUFBTSxDQUFOLEVBQVMsS0FBVCxDQUFlLEdBQWYsQ0FBWDtBQUNBLGNBQU0sbUJBQW1CLEtBQUssQ0FBTCxDQUFuQixDQUFOLElBQXFDLG1CQUFtQixLQUFLLENBQUwsS0FBVyxFQUE5QixDQUFyQztBQUNEO0FBQ0QsV0FBTyxLQUFQO0FBQ0Q7QUFFRCxTQUFTLFFBQVQsQ0FBa0IsSUFBbEIsRUFBZ0MsS0FBaEMsRUFBcUQsUUFBckQsRUFBa0Y7QUFDaEYsZUFBUyxNQUFULEdBQWtCLElBQWxCLEVBQTBCLEVBQUUsT0FBTyxLQUFULEVBQTFCLEVBQ0csSUFESCxDQUNRO0FBQUEsZUFBWSxTQUFTLElBQVQsRUFBWjtBQUFBLEtBRFIsRUFFRyxJQUZILENBRVEsVUFBVSxJQUFWLEVBQWM7QUFDbEIsWUFBSSxLQUFLLElBQUwsSUFBYSxHQUFqQixFQUFzQjtBQUNwQixvQkFBUSxH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SSxNQUFNLFNBQVMsS0FBVCxDQUFlLEdBQWYsQ0FBVjtBQUNBLGVBQVcsSUFBSSxJQUFJLE1BQUosR0FBVyxDQUFmLENBQVg7QUFDQSxRQUFJLFFBQVEsV0FBVyxPQUFPLFFBQVAsQ0FBZ0IsTUFBM0IsQ0FBWjtBQUNBLFlBQVEsUUFBUjtBQUNFLGFBQUssRUFBTDtBQUNBLGFBQUssWUFBTDtBQUNFLHNCQUFVLEtBQVY7QUFDQTtBQUNGLGFBQUssY0FBTDtBQUNFLHdCQUFZLEtBQVo7QUFDQTtBQUNGO0FBQ0Usb0JBQVEsR0FBUixDQUFZLGdCQUFaLEVBQThCLFFBQTlCLEVBQXdDLE9BQU8sUUFBUCxDQUFnQixRQUF4RDtBQUNBO0FBVko7QUFZRDtBQXJCRCxRQUFBLElBQUEsR0FBQSxJQUFBO0FBdUJBLFNBQVMsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLFlBQUE7QUFDNUM7QUFDRCxDQUZEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiXG5sZXQgc2VydmVyID0gJydcbmxldCBkYXRhOiBhbnkgPSB1bmRlZmluZWRcblxubGV0IGlwTmFtZU1hcDogYW55ID0ge1xuICAnMTkyLjE2OC4zMS4yMTgnOiAn5bCP57Gz56yU6K6w5pysJyxcbiAgJzE5Mi4xNjguMzEuMjUxJzogJ+WFrOWPuE1CUCcsXG4gICcxOTIuMTY4LjMxLjE2Mic6ICflsI/nsbPmiYvmnLonLFxuICAnXHQxOTIuMTY4LjMxLjI0MSc6ICdpcGFkMjAxOCcsXG4gICcxOTIuMTY4LjMxLjI1NCc6ICfljY7kuLpQMzAnXG59XG5cbmZ1bmN0aW9uIHBhcnNlUXVlcnkocXVlcnlTdHJpbmc6IHN0cmluZykge1xuICB2YXIgcXVlcnk6IGFueSA9IHt9XG4gIHZhciBwYWlycyA9IChxdWVyeVN0cmluZ1swXSA9PT0gJz8nID8gcXVlcnlTdHJpbmcuc3Vic3RyaW5nKDEpIDogcXVlcnlTdHJpbmcpLnNwbGl0KCcmJylcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwYWlyID0gcGFpcnNbaV0uc3BsaXQoJz0nKVxuICAgIHF1ZXJ5W2RlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSB8fCAnJylcbiAgfVxuICByZXR1cm4gcXVlcnlcbn1cblxuZnVuY3Rpb24gZmV0Y2hHZXQocGF0aDogc3RyaW5nLCBjYWNoZTogUmVxdWVzdENhY2hlLCBjYWxsYmFjazogKGRhdGE6IGFueSkgPT4gdm9pZCkge1xuICBmZXRjaChgJHtzZXJ2ZXJ9JHtwYXRofWAsIHsgY2FjaGU6IGNhY2hlIH0pXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICBpZiAocmVzcC5jb2RlICE9IDIwMCkge1xuICAgICAgICBjb25zb2xlLmxvZygnZmV0Y2hHZXQsbm90IDIwMCcsIHJlc3ApXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhyZXNwLmRhdGEpXG4gICAgfSlcbiAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZmV0Y2hHZXQgRmFpbGVkJywgZXJyb3IpXG4gICAgfSlcbn1cblxuXG5mdW5jdGlvbiBmZXRjaFBvc3QocGF0aDogc3RyaW5nLCBib2R5OiBhbnksIGNhY2hlOiBSZXF1ZXN0Q2FjaGUsIGNhbGxiYWNrOiAoZGF0YTogYW55KT0+dm9pZCkge1xuICBmZXRjaChgJHtzZXJ2ZXJ9JHtwYXRofWAsIHtcbiAgICBtZXRob2Q6ICdQT1NUJywgLy8gKkdFVCwgUE9TVCwgUFVULCBERUxFVEUsIGV0Yy5cbiAgICBtb2RlOiAnY29ycycsIC8vIG5vLWNvcnMsICpjb3JzLCBzYW1lLW9yaWdpblxuICAgIGNhY2hlOiBjYWNoZSwgLy8gKmRlZmF1bHQsIG5vLWNhY2hlLCByZWxvYWQsIGZvcmNlLWNhY2hlLCBvbmx5LWlmLWNhY2hlZFxuICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLCAvLyBpbmNsdWRlLCAqc2FtZS1vcmlnaW4sIG9taXRcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAvLyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgfSxcbiAgICByZWRpcmVjdDogJ2ZvbGxvdycsIC8vIG1hbnVhbCwgKmZvbGxvdywgZXJyb3JcbiAgICByZWZlcnJlclBvbGljeTogJ25vLXJlZmVycmVyJywgLy8gbm8tcmVmZXJyZXIsICpuby1yZWZlcnJlci13aGVuLWRvd25ncmFkZSwgb3JpZ2luLCBvcmlnaW4td2hlbi1jcm9zcy1vcmlnaW4sIHNhbWUtb3JpZ2luLCBzdHJpY3Qtb3JpZ2luLCBzdHJpY3Qtb3JpZ2luLXdoZW4tY3Jvc3Mtb3JpZ2luLCB1bnNhZmUtdXJsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSkgLy8gYm9keSBkYXRhIHR5cGUgbXVzdCBtYXRjaCBcIkNvbnRlbnQtVHlwZVwiIGhlYWRlclxuICB9KVxuICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgaWYgKHJlc3AuY29kZSAhPSAyMDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3RyYW5zV29yZHMgZmV0Y2gsbm90IDIwMCcsIHJlc3ApXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhyZXNwLmRhdGEpXG4gICAgfSlcbiAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnZmV0Y2hQb3N0IEZhaWxlZCcsIGVycm9yKVxuICAgIH0pXG59XG5cblxuZnVuY3Rpb24gcmVuZGVyRmlsdGVySXBTZWxlY3QoaXBzOiBzdHJpbmdbXSkge1xuICBsZXQgaHRtbCA9ICc8b3B0aW9uIHZhbHVlPVwiXCI+YWxsPC9vcHRpb24+J1xuICBmb3IgKGxldCBpcCBvZiBpcHMpIHtcbiAgICBsZXQgbmFtZSA9IGlwXG4gICAgaWYgKGlwTmFtZU1hcFtpcF0pIHtcbiAgICAgIG5hbWUgPSBpcE5hbWVNYXBbaXBdXG4gICAgfVxuICAgIGh0bWwgKz0gYDxvcHRpb24gdmFsdWU9XCIke2lwfVwiPiR7bmFtZX08L29wdGlvbj5gXG4gIH1cblxuICAvL0B0cy1pZ25vcmVcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlcklwJykuaW5uZXJIVE1MID0gaHRtbFxufVxuXG5mdW5jdGlvbiByZW5kZXJRdWVyeWxvZ1RhYmxlKGRhdGE6IGFueSwgdW5pcXVlOiBib29sZWFuLCBmcmVzaElwOiBib29sZWFuKSB7XG4gIGxldCBpcE1hcDogYW55ID0ge31cbiAgbGV0IGh0bWwgPSAnJ1xuICBsZXQgZG9tYWluTWFwOiBhbnkgPSB7fVxuICBmb3IgKGxldCBpdGVtIG9mIGRhdGEpIHtcbiAgICBpZiAodW5pcXVlICYmIGRvbWFpbk1hcFtpdGVtWzNdXSkge1xuICAgICAgY29udGludWVcbiAgICB9XG4gICAgZG9tYWluTWFwW2l0ZW1bM11dID0gMVxuICAgIGlwTWFwW2l0ZW1bMl1dID0gMVxuICAgIGxldCBkYXRlID0gbmV3IERhdGUocGFyc2VJbnQoaXRlbVswXSkqMTAwMClcbiAgICBsZXQgYXQgPSBpdGVtWzFdXG4gICAgc3dpdGNoIChhdCkge1xuICAgICAgY2FzZSAnMCc6XG4gICAgICAgIGF0ID0gJ+W/veeVpSdcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJzEnOlxuICAgICAgICBhdCA9ICfmraPluLgnXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICcyJzpcbiAgICAgICAgYXQgPSAn5oum5oiqJ1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgbGV0IGlwID0gaXRlbVsyXVxuICAgIGlmIChpcE5hbWVNYXBbaXBdKSB7XG4gICAgICBpcCArPSBgKCR7aXBOYW1lTWFwW2lwXX0pYFxuICAgIH1cbiAgICBodG1sICs9IGA8dHI+XG4gICAgPHRkPiR7ZGF0ZS50b0xvY2FsZVN0cmluZygpfTwvdGQ+XG4gICAgPHRkPiR7YXR9PC90ZD5cbiAgICA8dGQ+JHtpcH08L3RkPlxuICAgIDx0ZD4ke2l0ZW1bM119PC90ZD5cbiAgICA8dGQ+JHtpdGVtWzRdP2l0ZW1bNF06Jyd9PC90ZD5cbiAgICA8dGQ+XG4gICAgICA8c2VsZWN0IG5hbWU9XCJvcHRcIiBjbGFzcz1cImZvcm0tc2VsZWN0XCIgZG9tYWluPVwiJHtpdGVtWzNdfVwiPlxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+5LiN5YqoPC9vcHRpb24+XG4gICAgICAgIDxvcHRpb24gdmFsdWU9XCIwXCI+5b+955WlPC9vcHRpb24+XG4gICAgICAgIDxvcHRpb24gdmFsdWU9XCIxXCI+5q2j5bi4PC9vcHRpb24+XG4gICAgICAgIDxvcHRpb24gdmFsdWU9XCIyXCI+5oum5oiqPC9vcHRpb24+XG4gICAgICA8L3NlbGVjdD5cbiAgICA8L3RkPlxuICAgIDwvdHI+YFxuICB9XG5cbiAgLy9AdHMtaWdub3JlXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWVyeWxvZycpLmlubmVySFRNTCA9IGh0bWxcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInNlbGVjdFtuYW1lPSdvcHQnXVwiKS5mb3JFYWNoKChzZWxlY3QpID0+IHtcbiAgICBjb25zb2xlLmxvZygnc2VsZWN0Jywgc2VsZWN0KVxuICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvcHRDaGFuZ2UpXG4gIH0pXG4gIGlmIChmcmVzaElwKSB7XG4gICAgcmVuZGVyRmlsdGVySXBTZWxlY3QoT2JqZWN0LmtleXMoaXBNYXApKVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbHRlcklwQ2hhbmdlKCkge1xuICAvL0B0cy1pZ25vcmVcbiAgbGV0IGlwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlcklwJykudmFsdWVcbiAgaWYgKGlwID09IFwiXCIpIHtcbiAgICByZW5kZXJRdWVyeWxvZ1RhYmxlKGRhdGEsIHRydWUsIGZhbHNlKVxuICAgIHJldHVyblxuICB9XG5cbiAgbGV0IGl0ZW1zOiBhbnkgPSBbXVxuICBmb3IgKGxldCBpdGVtIG9mIGRhdGEpIHtcbiAgICBpZiAoaXAgIT0gaXRlbVsyXSkge1xuICAgICAgY29udGludWVcbiAgICB9XG4gICAgaXRlbXMucHVzaChpdGVtKVxuICB9XG4gIHJlbmRlclF1ZXJ5bG9nVGFibGUoaXRlbXMsIGZhbHNlLCBmYWxzZSlcbn1cblxuZnVuY3Rpb24gYWNjZXNzVHlwZUNoYW5nZSgpIHtcbiAgLy9AdHMtaWdub3JlXG4gIGxldCBhdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2Nlc3NUeXBlJykudmFsdWVcbiAgaWYgKGF0ID09IFwiXCIpIHtcbiAgICByZW5kZXJRdWVyeWxvZ1RhYmxlKGRhdGEsIHRydWUsIGZhbHNlKVxuICAgIHJldHVyblxuICB9XG5cbiAgbGV0IGl0ZW1zOiBhbnkgPSBbXVxuICBmb3IgKGxldCBpdGVtIG9mIGRhdGEpIHtcbiAgICBpZiAoYXQgIT0gaXRlbVsxXSkge1xuICAgICAgY29udGludWVcbiAgICB9XG4gICAgaXRlbXMucHVzaChpdGVtKVxuICB9XG4gIHJlbmRlclF1ZXJ5bG9nVGFibGUoaXRlbXMsIGZhbHNlLCBmYWxzZSlcbn1cblxuZnVuY3Rpb24gb3B0Q2hhbmdlKGV2ZW50OiBhbnkpIHtcbiAgbGV0IG9wdCA9IGV2ZW50LnRhcmdldC52YWx1ZVxuICBpZiAob3B0ID09IFwiXCIpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGxldCBhdDogbnVtYmVyID0gcGFyc2VJbnQob3B0KVxuICAvL0B0cy1pZ25vcmVcbiAgbGV0IGlwOiBzdHJpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVySXAnKS52YWx1ZVxuICBpZiAoYXQgPT0gMikge1xuICAgIC8v5b+955Wl5bCx5YWo6YOo5b+955WlXG4gICAgaXAgPSBcIlwiXG4gIH1cbiAgbGV0IGRvbWFpbiA9IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RvbWFpbicpXG4gIGZldGNoUG9zdCgnL2FwaS9hY2Nlc3MtY29udHJvbC91cGRhdGUnLCB7YWNjZXNzVHlwZTogYXQsIGlwOiBpcCwgZG9tYWluOiBkb21haW59LCAnbm8tY2FjaGUnLCAocnNwRGF0YSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKHJzcERhdGEpXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGluaXREYXRlc1NlbGVjdCgpIHtcbiAgbGV0IHRzID0gRGF0ZS5ub3coKSAtIDM2MDAqOCoxMDAwXG4gIGxldCBodG1sID0gJydcbiAgZm9yIChsZXQgaT0wO2k8MTA7aSsrKSB7XG4gICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh0cylcbiAgICBsZXQgc3RyID0gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfSR7KGRhdGUuZ2V0TW9udGgoKSsxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9JHsoZGF0ZS5nZXREYXRlKCkpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gXG4gICAgaHRtbCArPSBgPG9wdGlvbiB2YWx1ZT1cIiR7c3RyfVwiPiR7c3RyfTwvb3B0aW9uPmBcbiAgICB0cyAtPSAzNjAwKjI0KjEwMDBcbiAgfVxuICAvL0B0cy1pZ25vcmVcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKS5pbm5lckhUTUwgPSBodG1sXG59XG5cbmZ1bmN0aW9uIHF1ZXJ5TG9nKCkge1xuICAvL0B0cy1pZ25vcmVcbiAgbGV0IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpLnZhbHVlXG4gIGlmIChkYXRlID09IFwiXCIpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIC8vQHRzLWlnbm9yZVxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVlcnlsb2cnKS5pbm5lckhUTUwgPSAnJ1xuICBmZXRjaFBvc3QoJy9hcGkvcXVlcnlsb2cvZ2V0Jywge2RhdGU6IGRhdGUsIGlwOiBcIlwiLCBidWZTaXplOiAxMDI0KjEwMjR9LCAnbm8tY2FjaGUnLCAocnNwRGF0YSkgPT4ge1xuICAgIGRhdGEgPSByc3BEYXRhXG4gICAgcmVuZGVyUXVlcnlsb2dUYWJsZShyc3BEYXRhLCB0cnVlLCB0cnVlKVxuICB9KVxufVxuXG5mdW5jdGlvbiBpbml0SW5kZXgocXVlcnk6IGFueSkge1xuICBpbml0RGF0ZXNTZWxlY3QoKVxuICBxdWVyeUxvZygpXG5cbiAgLy9AdHMtaWdub3JlXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgcXVlcnlMb2cpXG4gIC8vQHRzLWlnbm9yZVxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVySXAnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmaWx0ZXJJcENoYW5nZSlcbiAgLy9AdHMtaWdub3JlXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2Nlc3NUeXBlJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYWNjZXNzVHlwZUNoYW5nZSlcbn1cblxuZnVuY3Rpb24gcmVuZGVyRGVueVRhYmxlKGRhdGE6IGFueSkge1xuICBsZXQgaHRtbCA9ICcnXG4gIGZvciAobGV0IGl0ZW0gb2YgZGF0YSkge1xuICAgIGxldCBpcCA9IGl0ZW1bMF1cbiAgICBpZiAoaXBOYW1lTWFwW2lwXSkge1xuICAgICAgaXAgKz0gYCgke2lwTmFtZU1hcFtpcF19KWBcbiAgICB9XG4gICAgaHRtbCArPSBgPHRyPlxuICAgIDx0ZD4ke2lwfTwvdGQ+XG4gICAgPHRkPiR7aXRlbVsxXX08L3RkPlxuICAgIDwvdHI+YFxuICB9XG5cbiAgLy9AdHMtaWdub3JlXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZW55VGFibGUnKS5pbm5lckhUTUwgPSBodG1sXG59XG5cblxuZnVuY3Rpb24gcmVuZGVyQ29udHJvbFRhYmxlKGRhdGE6IGFueSkge1xuICBkYXRhLnNvcnQoKGE6YW55LGI6YW55KT0+IGJbMl0gLSBhWzJdKVxuICBsZXQgaHRtbCA9ICcnXG4gIGZvciAobGV0IGl0ZW0gb2YgZGF0YSkge1xuICAgIGxldCBjb250cm9sID0gaXRlbVsyXVxuICAgIHN3aXRjaCAoY29udHJvbCkge1xuICAgICAgY2FzZSAnMCc6XG4gICAgICAgIGNvbnRyb2wgPSAn5b+955WlJ1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnMSc6XG4gICAgICAgIGNvbnRyb2wgPSAn5q2j5bi4J1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnMic6XG4gICAgICAgIGNvbnRyb2wgPSAn5oum5oiqJ1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgbGV0IGlwID0gaXRlbVswXVxuICAgIGlmIChpcE5hbWVNYXBbaXBdKSB7XG4gICAgICBpcCArPSBgKCR7aXBOYW1lTWFwW2lwXX0pYFxuICAgIH1cbiAgICBodG1sICs9IGA8dHI+XG4gICAgPHRkPiR7aXB9PC90ZD5cbiAgICA8dGQ+JHtpdGVtWzFdfTwvdGQ+XG4gICAgPHRkPiR7Y29udHJvbH08L3RkPlxuICAgIDwvdHI+YFxuICB9XG5cbiAgLy9AdHMtaWdub3JlXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250cm9sVGFibGUnKS5pbm5lckhUTUwgPSBodG1sXG59XG5cbmZ1bmN0aW9uIGRlbnlTdWJtaXQoZXZlbnQ6IGFueSkge1xuICAvL0B0cy1pZ25vcmVcbiAgbGV0IGlwOiBzdHJpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXAnKS52YWx1ZS50cmltKClcbiAgLy9AdHMtaWdub3JlXG4gIGxldCBhdDogbnVtYmVyID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbnknKS52YWx1ZSlcbiAgbGV0IGRlbnkgPSBhdCA9PSAxPyB0cnVlOiBmYWxzZVxuICBcbiAgZmV0Y2hQb3N0KCcvYXBpL2FjY2Vzcy1kZW55L3VwZGF0ZScsIHtkZW55OiBkZW55LCBpcDogaXB9LCAnbm8tY2FjaGUnLCAocnNwRGF0YSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKHJzcERhdGEpXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGNvbnRyb2xTdWJtaXQoZXZlbnQ6IGFueSkge1xuICAvL0B0cy1pZ25vcmVcbiAgbGV0IGlwOiBzdHJpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXAnKS52YWx1ZS50cmltKClcbiAgLy9AdHMtaWdub3JlXG4gIGxldCBkb21haW46IHN0cmluZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb21haW4nKS52YWx1ZS50cmltKClcbiAgLy9AdHMtaWdub3JlXG4gIGxldCBhdDogbnVtYmVyID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F0JykudmFsdWUpXG4gIGlmIChhdCA9PSAyKSB7XG4gICAgLy/lv73nlaXlsLHlhajpg6jlv73nlaVcbiAgICBpcCA9IFwiXCJcbiAgfVxuICBcbiAgZmV0Y2hQb3N0KCcvYXBpL2FjY2Vzcy1jb250cm9sL3VwZGF0ZScsIHthY2Nlc3NUeXBlOiBhdCwgaXA6IGlwLCBkb21haW46IGRvbWFpbn0sICduby1jYWNoZScsIChyc3BEYXRhKSA9PiB7XG4gICAgY29uc29sZS5sb2cocnNwRGF0YSlcbiAgfSlcbn1cblxuZnVuY3Rpb24gaW5pdENvbnRyb2wocXVlcnk6IGFueSkge1xuICAvL0B0cy1pZ25vcmVcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbnlUYWJsZScpLmlubmVySFRNTCA9ICcnXG4gIGZldGNoUG9zdCgnL2FwaS9hY2Nlc3MtZGVueS9nZXQnLCB7fSwgJ25vLWNhY2hlJywgKHJzcERhdGEpID0+IHtcbiAgICByZW5kZXJEZW55VGFibGUocnNwRGF0YSlcbiAgfSlcblxuICAvL0B0cy1pZ25vcmVcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRyb2xUYWJsZScpLmlubmVySFRNTCA9ICcnXG4gIGZldGNoUG9zdCgnL2FwaS9hY2Nlc3MtY29udHJvbC9nZXQnLCB7fSwgJ25vLWNhY2hlJywgKHJzcERhdGEpID0+IHtcbiAgICByZW5kZXJDb250cm9sVGFibGUocnNwRGF0YSlcbiAgfSlcblxuICAvL0B0cy1pZ25vcmVcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbnlTdWJtaXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbnlTdWJtaXQpXG4gIFxuICAvL0B0cy1pZ25vcmVcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRyb2xTdWJtaXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRyb2xTdWJtaXQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuc3RhcnRzV2l0aCgnZmlsZTonKSkge1xuICAgIHNlcnZlciA9ICdodHRwOi8vMTI3LjAuMC4xOjgxMjMnXG4gIH1cblxuICBsZXQgcGF0aG5hbWUgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVcbiAgbGV0IGFyciA9IHBhdGhuYW1lLnNwbGl0KCcvJylcbiAgcGF0aG5hbWUgPSBhcnJbYXJyLmxlbmd0aC0xXVxuICBsZXQgcXVlcnkgPSBwYXJzZVF1ZXJ5KHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpXG4gIHN3aXRjaCAocGF0aG5hbWUpIHtcbiAgICBjYXNlICcnOlxuICAgIGNhc2UgJ2luZGV4Lmh0bWwnOlxuICAgICAgaW5pdEluZGV4KHF1ZXJ5KVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdjb250cm9sLmh0bWwnOlxuICAgICAgaW5pdENvbnRyb2wocXVlcnkpXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zb2xlLmxvZygnd3JvbmcgcGF0aG5hbWUnLCBwYXRobmFtZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKVxuICAgICAgYnJlYWtcbiAgfVxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICBpbml0KClcbn0pIl19"}